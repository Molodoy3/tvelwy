/*! For license information please see app.min.js.LICENSE.txt */
(()=>{"use strict";window.addEventListener("load",(function(){let e,t,o,n,s,a=!1;const r=new URL(window.location.href).pathname.slice(1);if("catalog"===r||"catalog.html"===r?(n="objectZIndexDragElementsCatalog",s="ObjectpositionsDragElementsCatalog"):(n="objectZIndexDragElements",s="ObjectpositionsDragElements"),localStorage.getItem(n)){const e=document.querySelectorAll("[data-drag]");e.length&&e.forEach((e=>{const t=e.dataset.drag,o=JSON.parse(localStorage.getItem(n));e.style.zIndex=o[t]}))}else{const e=document.querySelectorAll("[data-drag]");if(e.length){const t={};let o=0;e.forEach((e=>{o++,t[e.dataset.drag]=o,e.style.zIndex=o}));const s=JSON.stringify(t);localStorage.setItem(n,s)}}if(localStorage.getItem(s)){const e=document.querySelectorAll("[data-drag]");e.length&&e.forEach((e=>{const t=e.dataset.drag,o=JSON.parse(localStorage.getItem(s));e.style.left=o["x"+t],e.style.top=o["y"+t]}))}else{const e={},t=JSON.stringify(e);localStorage.setItem(s,t)}document.addEventListener("mousedown",(s=>{const r=s.target;if(r.closest("[data-drag]")){a=!0;const d=r.closest("[data-drag]"),l=document.querySelectorAll("[data-drag"),c=JSON.parse(localStorage.getItem(n));let i=l.length+1;const u=d.style.zIndex;if(u!==i){d.style.zIndex=i,c[d.dataset.drag]=i;for(let e=Number(u)+1;e<=i;e++)l.forEach((t=>{t.style.zIndex==e&&(t.style.zIndex-=1,c[t.dataset.drag]-=1)}));localStorage.setItem(n,JSON.stringify(c))}d.dataset.dragActive="",e=s.clientX-d.getBoundingClientRect().left,t=s.clientY-d.getBoundingClientRect().top,o=new Date}})),document.addEventListener("touchstart",(o=>{const s=o.target;if(s.closest("[data-drag]")){a=!0;const r=s.closest("[data-drag]");r.dataset.dragActive="";const d=document.querySelectorAll("[data-drag"),l=JSON.parse(localStorage.getItem(n));let c=d.length+1;const i=r.style.zIndex;if(i!==c){r.style.zIndex=c,l[r.dataset.drag]=c;for(let e=Number(i)+1;e<=c;e++)d.forEach((t=>{t.style.zIndex==e&&(t.style.zIndex-=1,l[t.dataset.drag]-=1)}));localStorage.setItem(n,JSON.stringify(l))}e=o.touches[0].clientX-r.getBoundingClientRect().left,t=o.touches[0].clientY-r.getBoundingClientRect().top}})),document.addEventListener("mouseup",(e=>{a=!1;const t=document.querySelector("[data-drag-active]");if(t){delete t.dataset.dragActive;const e=JSON.parse(localStorage.getItem(s));if(e["x"+t.dataset.drag]=t.style.left,e["y"+t.dataset.drag]=t.style.top,localStorage.setItem(s,JSON.stringify(e)),new Date-o<100){const e=t.querySelector("[data-custom-link]");e&&(window.location.href=e.dataset.customLink)}}})),document.addEventListener("touchend",(()=>{a=!1;const e=document.querySelector("[data-drag-active]");if(e){delete e.dataset.dragActive;const t=JSON.parse(localStorage.getItem(s));t["x"+e.dataset.drag]=e.style.left,t["y"+e.dataset.drag]=e.style.top,localStorage.setItem(s,JSON.stringify(t))}})),document.addEventListener("mousemove",(o=>{if(a){const n=document.querySelector("[data-drag-active]"),s=(o.clientX-e)/window.innerWidth*100,a=(o.clientY-t)/window.innerHeight*100;let r=Math.max(0,Math.min(s,100-n.offsetWidth/window.innerWidth*100)),d=Math.max(0,Math.min(a,100-n.offsetHeight/window.innerHeight*100));n.style.left=r+"%",n.style.top=d+"%"}})),document.addEventListener("touchmove",(o=>{if(a){const n=document.querySelector("[data-drag-active]"),s=(o.touches[0].clientX-e)/window.innerWidth*100,a=(o.touches[0].clientY-t)/window.innerHeight*100;let r=Math.max(0,Math.min(s,100-n.offsetWidth/window.innerWidth*100)),d=Math.max(0,Math.min(a,100-n.offsetHeight/window.innerHeight*100));n.style.left=r+"%",n.style.top=d+"%"}})),function(){var e=document.querySelectorAll(".popup-order__button");if(document.forms.formOrder){function t(e){e.preventDefault();let t=this.closest("form");console.log(t),console.log(n(t)),0===n(t)?o(t):t.classList.add("error")}function o(e){console.log(e);var t=new FormData(e),o=new XMLHttpRequest;o.open("POST","/send.php",!0),o.send(t),o.onload=function(){"ok"==o.responseText?(console.log("sucsess"),console.log(o.responseText),e.innerHTML="<p style='padding:100px 10px;text-align:center'>Заказ успешно отправлен!</p>"):(console.log("error"),console.log(o.responseText),e.innerHTML="<p style='padding:100px 10px;text-align:center'>"+o.responseText+"</p>")}}function n(e){let t=0;const o=e.querySelectorAll(".req");if(o.length){for(let e=0;e<o.length;e++){const n=o[e];if(s(n),n.classList.contains("contact"))r(n)&&d(n)&&(a(n),t++);else if(n.classList.contains("select"))n.options[n.selectedIndex].disabled&&(a(n),t++);else if(n.dataset.validateMin){const e=n.dataset.validateMin;if(n.value.length<e){if(a(n),t++,n.dataset.textError){const e=n.dataset.textError,t=n.parentElement.querySelector(".error-element");t&&t.remove(),n.insertAdjacentHTML("afterend",`<div class="error-element">${e}</div>`)}}else{const e=n.parentElement.querySelector(".error-element");e&&e.remove()}}else""===n.value&&(a(n),t++)}return t}}function s(e){e.classList.remove("error"),e.parentElement.classList.remove("error")}function a(e){e.classList.add("error"),e.parentElement.classList.add("error")}function r(e){return!/^\w+([\.*]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}function d(e){const t=e.value.replace(/\D/g,"");return!/^\d{10,15}$/.test(t)}e.forEach((function(e){return e.addEventListener("click",t)}))}}(),document.addEventListener("click",(function(e){const t=e.target;if(t.closest("[data-close-for-custom-popup]")){const e=t.closest("[data-custom-popup]");if(e){e.classList.remove("open"),document.body.style.overflow="auto",document.body.style.paddingRight=0;const t=document.querySelector("header");t&&(t.style.paddingRight=0)}}if(t.closest("[data-button-for-open-custom-popup]")){const o=t.closest("[data-button-for-open-custom-popup]").dataset.buttonForOpenCustomPopup,n=document.querySelector(`[data-custom-popup="${o}"]`);if(n){n.classList.add("open");const t=window.innerWidth-document.body.offsetWidth+"px";document.body.style.paddingRight=t,document.body.style.overflow="hidden";const o=document.querySelector("header");o&&(o.style.paddingRight=t),e.preventDefault()}}else if(!t.closest("[data-custom-popup].open [data-custom-popup-content]")){const e=document.querySelector("[data-custom-popup].open");if(e){e.classList.remove("open"),document.body.style.overflow="auto",document.body.style.paddingRight=0;const t=document.querySelector("header");t&&(t.style.paddingRight=0)}}}));const d=document.documentElement,l=localStorage.getItem("user-theme");let c;window.matchMedia&&(c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{!l&&function(e=!1){let t,o=d.classList.contains("light")?"light":"dark";"light"===o?t="dark":"dark"===o&&(t="light"),d.classList.remove(o),d.classList.add(t),e&&localStorage.setItem("user-theme",t)}()})),document.querySelector(".theme");const i=document.querySelector(".reset-theme");l?(d.classList.add(l),i&&i.classList.add("active")):d.classList.add(c);const u=document.querySelector(".cases-slider__slider");u&&new Swiper(u,{modules:[Navigation],wrapperClass:"cases-slider__wrapper",slideClass:"cases-slider__slide",navigation:{prevEl:".cases-slider__prev",nextEl:".cases-slider__next"},direction:"horizontal",slidesPerView:1,loop:!1,speed:800,spaceBetween:30,observer:!0,observeParents:!0,observeSlideChildren:!0});const g=document.querySelector("[data-id-option]");if(g){const e=document.querySelector(`[data-id-option-select = "${g.dataset.idOption}"]`);e&&(e.selected=!0)}const m=document.getElementById("imageInput");m&&m.addEventListener("change",(e=>{const t=e.target.files[0].name,o=document.querySelector(".popup-order__name-file");o&&(o.classList.remove("none"),o.textContent=t)}))}))})();